Monkeyhead's OCR Realtime Translator

감사의 말 : MORT 제작에 밤늦게까지 함께한 조원, 프로그래밍에 도움을 주신 원스타님, 스킨을 그려주신 슐라인님, 로고를 제작해준 김엠엘님, JPN 교육자료를 제공해주신 눈물꽃님 그리고 응원해준 스팀비비 회원분들 과 MORT를 사용해주신 유저분들 정말 감사드립니다.

만든이 - 팀장: 몽키해드(김무영)
로고 디자인 : 김엠엘


MORT 공식 페이지
http://killkimno.blog.me/70179867557

블로그
몽키해드 : http://killkimno.blog.me
김엠엘 : http://blog.naver.com/sabon2000

OCR : TesseractOCR 3.02
https://code.google.com/p/tesseract-ocr/
NHocr 0.21
http://sourceforge.jp/projects/nhocr/


본 프로그램은 윈도우 XP SP3 이상의 운영체제와 넷 프레임 워크4.0 이상을 요구합니다.
XP용 넷 프레임 워크 4.0
http://www.microsoft.com/ko-kr/download/details.aspx?id=17851  
비스타 이상용 넷 프레임 워크 4.5
http://www.microsoft.com/ko-kr/download/details.aspx?id=30653 

넷프레임 워크가 있어도 실행이 안 될때(Microsoft Visual C++ 2010 SP1 재배포 가능 패키지(x86)
http://www.microsoft.com/ko-kr/download/details.aspx?id=8328





0. MORT 란?
 
 
 Tesseract OCR 을 이용한 실시간 게임 번역기 입니다.
동작 방식은 게임 화면에 있는 대사를 이미지로 캡쳐 후 OCR 을 이용해 대사를 추출, 번역본 DB나 BING 번역기를 이용해 게임 대사를 번역해 주는 프로그램입니다.
 
현재 영어와 일본어를 번역가능하며, 클립보드에 저장 기능을 이용해 후킹 프로그램과 연동해 번역할 수도 있습니다.
 
 
 
 
 
 
 
1. MORT 실행하기
 
압축을 푸신후 MORT.EXE 로 실행하면 됩니다.
 
 
 
2. MORT 사용하기
 
- 게임 대사 영역 지정

MORT를 사용하기 위해선 게임 대사가 나오는 영역을 지정해야 합니다.
 
영역을 지정하는 방법으로는 옵션창의 영역 설정 버튼을 누르거나 리모컨은 Search 버튼을 누르시면 됩니다. 또는 트레이 아이콘에서 설정하셔도 됩니다. 
버튼을 누르신 후 게임대사가 나오는 영역을 드래그 해서 설정하시면 됩니다.
만약 옵션창에서 영역 설정을 이용하셨다면 적 용을 눌러야 적용됩니다.
 
 
- 게임 대사 번역하기 시작하기
 
게임 대사 영역이 설정 되셨으면 리모컨의 Translate 버튼을 눌러 번역을 시작할 수 있습니다.
(번역을 하기전 가급적 이미지 보정 기능을 먼저 설정하시기 바랍니다)
 
 
 
 
 
3. 세부 옵션 설정
 
 
- 번역 방식 설정

MORT는 Bing 번역기를 이용한 번역과 게임 번역본이 저장된 DB를 이용한 번역방법을 지원합니다.
 
 
-Bing 번역기 사용
 
Bing 번역기는 마이크로 소프트에서 제공한 Bing 번역기를 이용합니다.
옵션창의 Bing 번역기를 누르신 후 적용을 누르면 Bing 번역기를 이용해 번역합니다.

활성화 키는 개인 Bing 번역기 계정 키를 넣어서 사용할 수 있습니다. 아무것도 입력하지 않을 경우 기본 키를 이용해 번역합니다.
 
빙 활성화 키 생성법 : http://killkimno.blog.me/70178280872
(빙 번역기는 매 달 2백만자만 사용할 수 있습니다.)
(가능하면 개인 키를 만들어서 사용하시기 바랍니다)

-네이버 번역기 사용
네이버에서 제공하는 번역기를 사용합니다.
네이버 번역기를 사용하기 위해선 개발자 센터에서 번역기 API 신청 후 클라이 id와 시크릿 id를 넣어야 합니다.

네이법 번역기 사용법 : http://killkimno.blog.me/220647426967
 
-번역본 DB 사용
 
 게임 번역본이 들어있는 DB를 사용합니다.
번역본 DB는 준한글화 방식으로 OCR로 추출한 문장을 이용해 DB에서 비슷하거나 동일한 문장이 있는지 검색한 후 번역본을 출력하는 방식입니다.
모든 게임에 사용가능한게 아닌 한글 DB가 만들어진 게임에서만 사용 하셔야 합니다.

번역본 DB는 옵션창의 DB를 클릭하시면 됩니다.
파일 이름은 번역본 파일 이름을 입력하시면 됩니다. 번역본 파일은 DB 폴더에 들어 있습니다.
 
 
 
 
 
- 이미지 보정
 
OCR에 문자를 추출하기 전 이미지를 보정하는 옵션입니다.
문자 색을 지정해 문자 이외의 배경을 제거하는 설정입니다. (해도 되고 안 해도 되지만 가급적 하는걸 추천합니다)
 
-RGB로 추출 : 문자의 RGB 값을 지정해 추출하는 방식입니다. 게임 폰트가 단색일 경우 사용하시면 됩니다.
-HSV로 추출 : 문자의 HSV값을 지정해 추출합니다. 게임 폰트가 단색이 아닐경우 사용하시면 됩니다.
-침식 사용 : 게임 폰트가 두꺼울 경우 사용하시면 됩니다. OCR 인식률이 다소 상승할 수 있습니다.

-그룹 : 색 범위를 추가 / 삭제로 여러 개 설정할 수 있습니다. 폰트 색이 여러 개 일 경우 사용하면 됩니다. 
 
폰트의 RGB, HSV 값은 OCR 영역 창에서 상단 오른쪽에 있는 스포이드 아이콘을 이용하면 알 수 있습니다.
 
 
- 색 추출
OCR 영역창 스포이드 아이콘을 클릭하면 색 추출 창이 나옵니다.
이 창을 이용해 게임상 폰트색을 알아낼 수 있으며, 미리 이진화 시켜 제대로 색을 선택했는지 확인할 수 있습니다.
 
- 색 그룹 선택
OCR 영역창 삼원색 아이콘을 클릭하면 색 그룹 선택 창이 나옵니다.
이 창을 이용해 해당 OCR에서 사용할 색 그룹을 지정할 수 있습니다. 기본값으로 모두 선택으로 되어 있습니다.
 
 
 
-OCR 설정
 
-Tessdata : 폰트 교육자료를 설정합니다. 폰트 교육자료는 Tessdata 폴더에 저장되어 있습니다.
여러 교육 자료를 사용하고 싶으면 +를 넣어 설정하시면 됩니다 (예: eng + jpn + ...).
영어는 eng, 일본어는 jpn 을 입력하시면 됩니다.
 
-OCR 결과 출력 : 번역창에 OCR 추출 결과도 출력 합니다.
-OCR 결과 파일로 저장 : OCR /번역 결과를 DB 형식으로 저장합니다. ocrResult.txt 에 저장됩니다.
-일본어 사용 : 일본어 추출을 사용합니다. Tessdata 가 일본어일때 사용하시면 됩니다.
-NHocr 사용 : 일본어 전용 OCR인 NHocr을 사용합니다. 대체적으로 Tesseract OCR 보다 성능이 좋습니다.
-클립보드에 저장 : OCR 추출 문장을 클립보드에 저장합니다. 다른 후킹 프로그램과 연동해서 번역할 수 있습니다. 
 
 
 
-추출 속도
 번역 속도를 지정합니다. 번역 속도가 느리다고 느껴지시면 속도를 올리시기 바랍니다.
(보통은 거의 1초에 한번씩 수행합니다)
 


-교정사전 사용
 교정 사전을 사용합니다. 사전에 등록된 단어와 매칭시 지정된 단어로 변경합니다.
트레이 아이콘에서 사용유무를 결정할 수 있습니다.


-활성화 된 윈도우에서 이미지 캡쳐 : 이미지 캡쳐를 현재 활성화 된 윈도우에서 가져옵니다. 이 옵션을 체크하면 게임 대사 위에 다른 윈도우가 가려도 대사를 추출할 수 있습니다.
옵션을 비활성화 할 경우 기존 전체이미지 캡쳐후 처리가 됩니다.


 
 
 
4. 번역본 DB 만들기
 
 
번역본 DB는 다음과 같은 규칙으로 만들어 졌습니다.
 
/s     -> 원본 데이타 시작 알림
원본 문장
/t      -> 번역 문장 시작 알림
번역 문장
/e     -> 한 문장의 끝을 알림
 
 
직접 화면에 나오는 대사를 입력하며 만들 거나 옵션의 OCR 결과 파일로 저장을 설정하여 만들 수 있습니다.



5. 교정사전 만들기

교정사전 규칙은 다음과 같습니다.

/s    ->단어 등록 시작
잘못된 단어
변경할 단어

예)
/s
enemg
enemy

/s
lllat
What

/s
ll duck
duck


ocr 문장 : lllat a enemg ll duck
->What a enemy duck 로 변경됨

ocr 문장 : lllat a enemgs ll ducks
->What a enemgs ll ducks 로 변경됨(1:1 매칭이 되어야지만 변경이 됨)







6. 업데이트 상황

2017 / 01 / 30
1.161로 업데이트 합니다.
-윈도우 10 OCR에서 항상 교정사전이 작용하던 문제를 수정했습니다.
-윈도우 10 OCR에서 번역 DB를 사용할 수 없던 문제를 수정했습니다.
-네이버 번역기에서 중국어 간체가 작동하지 않던 문제를 수정했습니다.
-빙 번역기 사용 불가 안내 문구를 추가했습니다.

2016 / 11 /19
1.16로 업데이트 합니다.
-OCR 방식 콤보박스가 추가 되었습니다. 이제 Tesseract OCR , NHocr, Win OCR 중 원하는걸 선택할 수 있습니다.
-윈도우 10 OCR이 추가 되었습니다.
-비정상적으로 빙 / 네이버 번역기 사용 가능한 문자수가 소모되던 문제를 수정했습니다.
-매우 빠름, 클립보드에 저장하기 기능이 활성화 된 상태에서 아네모네를 실행했을 때 다운되던 문제를 수정했습니다.
-레이어 번역창이 번역을 시작할 때 무조건 최상단에 노출되게 변경했습니다.

2016 / 7 / 03
1.15로 업데이트 합니다.
-네이버 번역기 API를 지원합니다. 네이버 번역기 사용 법은 http://killkimno.blog.me/220647426967
-단축키 지정 기능이 추가 되었습니다.
-DB 검색시 대소문자 구분 무시 기능을 추가 했습니다.
-번역 설정을 콤보박스로 구별해 놓았습니다.
-처리 속도 옵션을 부가 설정 탭으로 이동했습니다.

2016 / 1 /31
1.14로 업데이트 합니다.
-색그룹 선택 기능이 추가 되었습니다.
-빠른 OCR 영역이 추가 되었습니다.
-탭 메뉴에 단축키가 추가 되었습니다.
-Nhocr 사용시 꺼지던 문제 일부를 수정했습니다.
-기본 설정에서 OCR 결과가 보이도록 수정했습니다.
-OCR 리모컨을 꺼도 OCR 영역이 계속 보이던 문제를 수정했습니다.
-버전 검사 URL을 수정했습니다.


2015 / 8 /23
1.133로 업데이트 합니다.
-빙 번역의 언어 설정이 제대로 안 되던 문제를 수정했습니다.

2015 / 8 / 9
1.132로 업데이트 합니다.
-NHocr에서 추출한 이미지 크기에 따라 MORT가 꺼지던 문제를 다시 수정했습니다.


2015 / 7 / 15
1.13V로 업데이트 합니다.
-GDI+ 오류가 발생할 경우 예외처리 하도록 수정했습니다.
-Tesseract OCR 언어 설정이 추가 되었습니다.
-Bing 언어 설정을 추가 하였습니다.
-추출한 이미지의 확대 배율을 설정할 수 있게 되었습니다.
-NHocr에서 추출한 이미지 크기에 따라 MORT 꺼지던 문제를 수정했습니다.

2015 / 4 / 23
-1.12V 에서 RGB로 추출하기가 작동하지 않던 문제를 수정했습니다.

2015 / 3 / 21
1.12V로 업데이트 합니다.
-탭 UI로 수정되었습니다.
-폰트 설정 UI가 추가되었습니다.
-기타 설정 UI가 추가되었습니다.
-구글 통계, 업데이트 확인을 설정할 수 있게 되었습니다
-글꼴, 크기, 색을 수정할 수 있으며 배경색 역시 사용할 수 있게 되었습니다.
-레이어 번역창에 테두리를 추가했습니다.
-설정 초기값에서 번역창을 레이어 번역창으로 변경했습니다.
-폰트에서 외곽선2가 누락되었던 문제를 수정했습니다.
-번역창 고정을 비활성화 한 상태에서 설정 초기화를 할 경우 발생하던 문제를 수정했습니다.
-Microsoft Visual C++ 2010 SP1 재배포 가능 패키지(x86) 를 요구하던 문제를 수정했습니다.
-1.121 -> 1.12에서 nhocr이 동작하지 않던 문제를 수정했습니다.


2015 / 2 / 11
1.11V로 업데이트 합니다.
-NHocr이 추가되었습니다.
-레이어 번역창의 가독성이 더욱 올랐습니다.
-레이어 번역창에 닫기기능이 추가되었습니다.
-기본 번역창을 사용중일 때 번역을 중단하면 이제 번역중지... 표시가 나오게 수정되었습니다.
-PayPal 후원하기 메뉴가 추가되었습니다.
-통계보기에서 주단위로 보기에서 월단위로 보기로 수정되었습니다.
-OCR설정 리모컨에서 확정을 누르지 않고 닫기 버튼을 눌렀을 경우 OCR영역이 가려지지 않던 문제를 수정했습니다.
-이제 OCR설정 리모컨에서 확정을 누르지 않고 닫기 버튼을 누르면 이전 값으로 리셋됩니다.
-그 외 자잘한 버그 수정.

2014 / 9 / 28
1.10V로 업데이트 합니다.
-색 추출 기능이 추가되었습니다. 
-이진화 미리해보기 기능이 추가되었습니다.
-이제 멀티모니터에서 MORT를 이용할 수 있습니다.
-레이어창에서 텍스트 정렬기능이 추가되었습니다.
-텍스트 공백제거 기능이 추가 되었습니다.
-통계 기능이 추가되었습니다.
-코드가 전보다 최적화 되었습니다. MORT 창이 전보다 쪼오금 더 빨라졌습니다.
-교정사전 추가 창이 활성화 되었을 시 클립보드 사용이 잠시 비활성화 됩니다.
-일본어 DB사용시 잘못된 경로로 파일을 열면 발생하던 문제가 수정되었습니다.
-OCR 설정창에서 초기화를 누르면 설정이 닫히던 문제가 수정되었습니다.
-기본 DPI가 아닐경우 OCR 설정창 영역이 제대로 안 잡히던 문제를 수정했습니다.
-레이어 텍스트창을 강제로 닫을 경우 문제가 발생하던 문제를 수정했습니다.
-번역도중 설정을 바꿀 시 생기는 문제를 수정했습니다.
-로고가 업데이트 팝업창을 가리던 문제를 수정했습니다.
-그 외 자잘한 버그 수정.
-DB 파일에 Evoland 가 추가 되었습니다.


2014 / 4 / 23
1.091V로 업데이트 합니다.
-설정을 저장할 경우 Tessdata가 제대로 저장 안 되던 문제를 수정했습니다.(기존 파일은 다시 저장해야 합니다)
-업데이트 버전 표시할 때 소수 둘째 자리까지 표시하도록 수정했습니다.
-akdhkdwjs1님이 보내주신 일본어 교정사전을 추가했습니다.

2014/ 4 / 19
1.09V로 업데이트 합니다.
-옵션에 교정사전 설정이 추가되었습니다.
-단축키가 구현되었습니다.
-CTRL + SHIFT + Z 로 번역 시작 / 중지 할 수 있습니다.
-CTRL + SHIFT + S 로 교정단어를 추가할 수 있습니다.
-DB 순차 검색이 구현되었습니다. 이제 대사가 순차적으로 나오는 게임은 전보다 훨씬 빠르게 DB를 검사합니다.
-사신크로스님이 보내주신 자료 덕분에 일본어 교정사전 단어가 대량으로 추가되었습니다.
-빙 번역기 사용시 이전 문장이 계속 남아있던 문제를 수정했습니다.
-번역 시작 시 OCR 옵션창이 계속 남아 있던 문제를 수정했습니다.
-레이어 번역창을 할 경우 빙 계정키 / 일본어 설정이 처음 생성될 때 만 적용되던 문제를 수정했습니다.
-DB 검색 범위를 좀더 높게 변경했습니다. 이제 전보다 OCR이 잘못 인식한 단어가 있더라도 검색합니다.



2014 / 3 / 27
1.08v로 업데이트 합니다.
-이제 설정이 유지됩니다.
-설정을 파일로 저장하거나 따로 불러올 수 있습니다.
-설정 초기화 기능이 생겼습니다.
-설정 관련 메뉴가 트레이 아이콘에 추가 되었습니다.
-OCR 영역 초기화 기능이 생겼습니다.
-작업 관리자에 OCR영역 / 리모콘 옵션 창이 표시되던 문제를 수정했습니다.
-DB 검색에서 후보자 기준이 제대로 작동하지 않던 문제를 수정했습니다. 이제 60% 이상 일치한 문장이 아니면 가져오지 않습니다.
-DB 검색에서 후보자를 찾았음에도 계속 검색하던 문제를 수정했습니다.
-DB 검색에서 후보자 기준을 좀 더 높게 잡습니다.
-각 DB의 설정 파일이 setting 폴더에 추가 되었습니다.
-적용하기를 누르면 OCR 영역도 같이 저장되게 수정했습니다.
-Syder Arcade의 DB 내용이 수정 되었습니다.


2014 / 3 / 13
1.07v로 업데이트 합니다.
-자동 버전 확인 기능이 추가되었습니다.
-일본어 DB 및 교정사전이 추가되었습니다.
-다중 OCR 영역 기능이 추가되었습니다.
-색 영역 그룹 기능이 추가되었습니다.
-OCR 영역 설정 방식이 변경되었습니다.
-OpenCV 2.4.8로 업그레이드 했습니다.
-적용 시 알림 팝업창이 번역창에 가려지던 문제를 수정했습니다.
-프로그램 초기화 실패 시 알림창 내용이 좀더 자세하게 나오도록 수정했습니다.
-프로그램 초기화 실패 시 오류목록 페이지에 자동으로 가도록 수중했습니다.
-프로그램 초기화 실패 시 알림창이 사라지던 문제와 프로그램이 강제로 실행되던 문제를 수정했습니다.
-번역창에서 줄바꿈이 제대로 안 되던 문제를 수정했습니다.
-빙 사용시 줄바꿈이 모두 사라지던 문제를 수정했습니다.
-줄 마지막 단어는 교정사전이 작동하지 않던 문제를 수정했습니다.
-교정 사전을 두번 적용하게 수정했습니다.
-레이어 번역창을 선택 시 OCR 결과 출력 사용 안함을 기본값으로 변경했습니다.
-OCR에서 추출한 문자가 1000바이트가 넘어갈 시 꺼져버리던 문제를 수정했습니다.
-윈도우 미디어 플레이가 없는 PC에 문제가 생길 수 있으므로 TTS 기능을 삭제했습니다.



2014 / 1 / 27
 일부 pc에서 GetClipBox()가 안 먹히는 곳이 있습니다. 안 먹힐경우 무시하고 넘어가는 방법으로 했습니다.
(이 경우 DPI문제는 해결할 수 없습니다)



2014 / 1 / 25
1.06v 로 업데이트 합니다.
-교정 사전이 추가되었습니다.
-프로그램 실행 시 비어있는 DB를 불러오게 변경했습니다.
-DPI에 따라 프로그램이 비정상적으로 돌아가던 문제를 수정했습니다.
-레이어 번역창 생성시 발생될 수 있는 문제를 수정했습니다.
-프로그램이 제대로 불러오기도 전에 트레이 아이콘을 눌렀을 때 발생하던 문제를 수정했습니다.
-강화된 DB 검색시 중복 처리를 수정했습니다.
-DB검색을 전보다 더 정교하게 검색하게 수정했습니다.
-DB검색시 메모리 누수가 생기던 문제를 수정했습니다.
-DB적용시 메모리 누수가 생기던 문제를 수정했습니다.
-Tesseract OCR 설정 변경시 제대로 안 되던 문제를 수정했습니다.
-레이어 번역창을 사용했을 때 db 결과가 없으면 아무것도 출력하지 않습니다.
-일반 번역창 사용했을 때 db 결과가 없으면 not thing 다시 나오게 수정했습니다.
-DB 파일에 Bad hotel의 번역인 badhotel.txt가 추가되었습니다.
-DB 파일에 Syder Arcade의 번역인 syder.txt가 추가되었습니다.


2014 / 1 / 4
1.05v 로 업데이트 합니다.
-TTS 기능이 적용되었습니다.
-레이어 번역창이 적용되었습니다.
-로고 처리에서 발생할 수 있는 문제를 수정 했습니다.
-강화된 DB 검색을 적용 했습니다. 전보다 더 정교하게 DB 문장을 가져 옵니다.
-DB 검색시 중복 검색을 하는 문제를 수정했습니다.
-DB 파일에 eXceed3의 번역인 exceed3.txt 가 추가 되었습니다.
-DB 파일에 Ether vapor의 번역인 ether.txt가 추가 되었습니다.


2013 / 12/ 20
1.04v로 업데이트 합니다.
-이제 기본 설정으로 문자 인식할 경우 그레이 스케일을 적용해 인식합니다.
-이미지를 양선형 보간법 처리합니다.
-기본 옵션의 문자 인식율이 대폭 상승했습니다.
-HSV, RGB의 문자 인식율이 대폭 상승했습니다.
-이미지 생성시 불필요한 메모리 생성, 삭제 과정을 없앴습니다.
-DB 파일에 eXceed2의 번역인 exceed2.txt 가 추가 되었습니다.

2013 / 12/ 10
1.03v로 업데이트 합니다.
-로고가 추가 되었습니다.
-About에서 '실험용 캐릭'을 클릭시 로고가 나옵니다.
-클립보드에 저장 기능을 추가했습니다.
-이미지 처리 성능이 개선되었습니다. 자주 끊기던 일이 개선되었습니다.
-일본어 성능이 1.02v 보다 향상되었습니다.
-일본어 사용 선택 시 자동으로 Tessdata 를 jpn으로 변경합니다.
-일본어 사용 해제 시 자동으로 Tessdata 를 eng로 변경합니다.
-dll 파일을 DLL 폴더에 넣었습니다.
-DB 파일에 Eryi's action 번역 db인 eryis.txt 가 추가 되었습니다.
-일본어 번역 DB는 아직 지원하지 않습니다.
 
2013 / 11/28
http://killkimno.blog.me/70180089481
1.01v에서 1.02v로 변경합니다
이 페이지를 MORT 공지사항 페이지로 활용합니다.
-Tessdata 를 설정해도 작동하지 않던 문제를 수정했습니다.
-유니코드를 처리할 수 있게 변경했습니다. 이제 일본어도 추출 가능하긴 합니다.
-OCR 설정 중 '일본어 사용'이 추가 되었습니다. 설정을 해야 일본어를 추출합니다.
-jpn.traineddata 를 포함시켰습니다.
-트레이 아이콘 메뉴에 업데이트 확인을 넣었습니다.
-Tessdata에 교육자료를 넣어도 불러오지 못할경우 시스템 환경변수에서 TESSDATA_PREFIX 가 있나 확인하시기 바랍니다. (있으면 삭제...또는 그곳에 교육자료를 넣기)
-아직 일본어 처리는 완벽하게 구현되지 않았습니다.


2013 /11/25
1.0에서 1.01v로 변경합니다.
-이제 모든 창을 끄시면 프로그램을 종료할건지 물어봅니다.
-더이상 중복 실행되지 않습니다.
-더이상 프로그램 실행시 자동으로 home.txt를 불러오지 않습니다.
 